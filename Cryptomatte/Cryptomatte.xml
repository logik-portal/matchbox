<ShaderNodePreset SupportsAdaptiveDegradation="False" SupportsAction="False" SupportsTransition="False" SupportsTimeline="False" TimelineUseBack="False" MatteProvider="False" CommercialUsePermitted="True" ShaderType="Matchbox" SoftwareVersion="2018.1" LimitInputsToTexture="True" Version="1" Description="Cryptomatte - extract up to four mattes from the ID/coverage pairs generated by Arnold/Clarisse/Mantra's Cryptomatte shaders.  

There's no need for this shader unless using very old Flame versions - since 2020 there's a built-in node for it: https://help.autodesk.com/view/FLAME/2023/ENU/?guid=GUID-0402116E-B47C-4E32-9010-DB8C334853E0

It's crucially important to use the floating colour sampler window - pick the colours from the first input, add them to the floating swatches and only then transfer them to the shader controls!  Auto Key needs to be off as well. This works in Flame 2018 Update 1 and above. See demo:
http://youtube.com/watch?v=p5D1FRRlplU

lewis@lewissaunders.com
" Name="Cryptomatte">
   <Shader ClearColor="0, 0, 0, 0" GridSubdivision="1" OutputBitDepth="Output" Index="1">
      <Uniform Index="0" NoInput="Error" Tooltip="" DisplayName="crypto00rgb" InputColor="44, 0, 99" Mipmaps="False" GL_TEXTURE_WRAP_T="GL_CLAMP_TO_EDGE" GL_TEXTURE_WRAP_S="GL_CLAMP_TO_EDGE" GL_TEXTURE_MAG_FILTER="GL_LINEAR" GL_TEXTURE_MIN_FILTER="GL_LINEAR" Type="sampler2D" Name="crypto00rgb">
      </Uniform>
      <Uniform Index="1" NoInput="Error" Tooltip="" DisplayName="crypto00a" InputColor="55, 0, 88" Mipmaps="False" GL_TEXTURE_WRAP_T="GL_CLAMP_TO_EDGE" GL_TEXTURE_WRAP_S="GL_CLAMP_TO_EDGE" GL_TEXTURE_MAG_FILTER="GL_LINEAR" GL_TEXTURE_MIN_FILTER="GL_LINEAR" Type="sampler2D" Name="crypto00a">
      </Uniform>
      <Uniform Index="2" NoInput="Error" Tooltip="" DisplayName="crypto01rgb" InputColor="66, 0, 77" Mipmaps="False" GL_TEXTURE_WRAP_T="GL_CLAMP_TO_EDGE" GL_TEXTURE_WRAP_S="GL_CLAMP_TO_EDGE" GL_TEXTURE_MAG_FILTER="GL_LINEAR" GL_TEXTURE_MIN_FILTER="GL_LINEAR" Type="sampler2D" Name="crypto01rgb">
      </Uniform>
      <Uniform Index="3" NoInput="Error" Tooltip="" DisplayName="crypto01a" InputColor="77, 0, 66" Mipmaps="False" GL_TEXTURE_WRAP_T="GL_CLAMP_TO_EDGE" GL_TEXTURE_WRAP_S="GL_CLAMP_TO_EDGE" GL_TEXTURE_MAG_FILTER="GL_LINEAR" GL_TEXTURE_MIN_FILTER="GL_LINEAR" Type="sampler2D" Name="crypto01a">
      </Uniform>
      <Uniform Index="4" NoInput="Error" Tooltip="" DisplayName="crypto02rgb" InputColor="88, 0, 55" Mipmaps="False" GL_TEXTURE_WRAP_T="GL_CLAMP_TO_EDGE" GL_TEXTURE_WRAP_S="GL_CLAMP_TO_EDGE" GL_TEXTURE_MAG_FILTER="GL_LINEAR" GL_TEXTURE_MIN_FILTER="GL_LINEAR" Type="sampler2D" Name="crypto02rgb">
      </Uniform>
      <Uniform Index="5" NoInput="Error" Tooltip="" DisplayName="crypto02a" InputColor="99, 0, 44" Mipmaps="False" GL_TEXTURE_WRAP_T="GL_CLAMP_TO_EDGE" GL_TEXTURE_WRAP_S="GL_CLAMP_TO_EDGE" GL_TEXTURE_MAG_FILTER="GL_LINEAR" GL_TEXTURE_MIN_FILTER="GL_LINEAR" Type="sampler2D" Name="crypto02a">
      </Uniform>

      <Uniform Row="1" Col="0" Page="0" Default="False" Tooltip="" Type="bool" ChannelName="SeparateRGB" DisplayName="Output 3 mattes in RGB" Name="separatergb">
      </Uniform>

      <Uniform Row="3" Col="0" Page="0" Default="False" Tooltip="Use the floating sampler to pick IDs. View Input1, alt-space-c or tap the dropper on the toolbar, move the red box, hit Add. Then tap a pot in the Pickers column and tap the first colour just added to the swatches.  Make sure Auto Key is off :)" Type="bool" ChannelName="Reminder" DisplayName="Picker instructions in tooltip!" Name="reminder">
      </Uniform>

      <Uniform Row="1" Col="2" Page="0" Default="True" Tooltip="" Type="bool" ChannelName="EnableResult" DisplayName="Enable" Name="enableresult" UIConditionSource="separatergb" UIConditionValue="False" UIConditionType="hide">
      </Uniform>
      <Uniform Row="0" Col="2" Page="0" Default="True" Tooltip="" Type="bool" ChannelName="EnableR" DisplayName="Enable" Name="enabler" UIConditionSource="separatergb" UIConditionValue="True" UIConditionType="hide">
      </Uniform>
      <Uniform Row="1" Col="2" Page="0" Default="True" Tooltip="" Type="bool" ChannelName="EnableG" DisplayName="Enable" Name="enableg" UIConditionSource="separatergb" UIConditionValue="True" UIConditionType="hide">
      </Uniform>
      <Uniform Row="2" Col="2" Page="0" Default="True" Tooltip="" Type="bool" ChannelName="EnableB" DisplayName="Enable" Name="enableb" UIConditionSource="separatergb" UIConditionValue="True" UIConditionType="hide">
      </Uniform>
      <Uniform Row="3" Col="2" Page="0" Default="True" Tooltip="" Type="bool" ChannelName="EnableMatte" DisplayName="Enable" Name="enablem">
      </Uniform>

      <Uniform Inc="0.01" Tooltip="Drag this over the image to check the first three mattes at that point.  Drag it back outside the image to return to normal operation" Row="3" Col="3" Page="0" Action3DWidget="False" IconType="Axis" IconDefaultState="True" ValueType="Position" Type="vec2" ChannelName="Inspect" DisplayName="Quick inspector" Name="inspect">
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="1.1">
         </SubUniform>
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.3">
         </SubUniform>
      </Uniform>

      <Uniform Inc="0.01" Tooltip="" Row="1" Col="1" Page="0" Action3DWidget="False" IconType="None" ValueType="Colour" Type="vec3" ChannelName="ID_Result" DisplayName="ID for Result" Name="pickresult" UIConditionSource="separatergb" UIConditionValue="False" UIConditionType="hide">
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
      </Uniform>
      <Uniform Inc="0.01" Tooltip="" Row="0" Col="1" Page="0" Action3DWidget="False" IconType="None" ValueType="Colour" Type="vec3" ChannelName="ID_R" DisplayName="ID for R" Name="pickr" UIConditionSource="separatergb" UIConditionValue="True" UIConditionType="hide">
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
      </Uniform>
      <Uniform Inc="0.01" Tooltip="" Row="1" Col="1" Page="0" Action3DWidget="False" IconType="None" ValueType="Colour" Type="vec3" ChannelName="ID_G" DisplayName="ID for G" Name="pickg" UIConditionSource="separatergb" UIConditionValue="True" UIConditionType="hide">
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
      </Uniform>
      <Uniform Inc="0.01" Tooltip="" Row="2" Col="1" Page="0" Action3DWidget="False" IconType="None" ValueType="Colour" Type="vec3" ChannelName="ID_B" DisplayName="ID for B" Name="pickb" UIConditionSource="separatergb" UIConditionValue="True" UIConditionType="hide">
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
      </Uniform>
      <Uniform Inc="0.01" Tooltip="" Row="3" Col="1" Page="0" Action3DWidget="False" IconType="None" ValueType="Colour" Type="vec3" ChannelName="ID_Matte" DisplayName="ID for Matte" Name="pickm">
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
         <SubUniform ResDependent="None" Max="1000000.0" Min="-1000000.0" Default="0.0">
         </SubUniform>
      </Uniform>
      <Uniform Row="1" Col="3" Page="0" Default="False" Tooltip="" Type="bool" ChannelName="Combine" DisplayName="Combine all mattes" Name="combine">
      </Uniform>
   </Shader>
   <Page Name="Cryptomatte" Page="0">
      <Col Name="Setup" Col="0" Page="0">
      </Col>
      <Col Name="Pickers" Col="1" Page="0">
      </Col>
      <Col Name="Enables" Col="2" Page="0">
      </Col>
      <Col Name="Output" Col="3" Page="0">
      </Col>
   </Page>
</ShaderNodePreset>
